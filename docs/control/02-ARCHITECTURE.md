# ARCHITECTURE — архитектура MVP (single-user)

## Компоненты системы

### 1) Telegram Bot (aiogram)
Назначение:
- быстрый ввод целей
- быстрый просмотр/редактирование (минимум в MVP)
- приём нескольких целей одним сообщением

Не отвечает за:
- локальные уведомления на телефоне
- визуальный интерфейс мобильного приложения

### 2) Backend API (Python)
Назначение:
- хранение целей, статусов, событий
- бизнес-логика и валидность переходов состояний
- выдача данных мобильному приложению
- приём действий пользователя
- управление правилами/политикой напоминаний (источник правил)

### 3) Mobile App (Flutter, Android-first)
Назначение:
- экран "Сегодня"
- календарь на месяц
- просмотр целей по дате
- действия по целям
- настройки напоминаний
- локальные уведомления и их пересоздание по правилам backend

### 4) Database (SQLite)
Назначение:
- хранение данных single-user MVP
- локально/на VPS (по архитектуре backend)
- простой старт без сложной инфраструктуры

## Принцип разделения ответственности

### UI (Gemini)
- отвечает за интерфейс, UX, экраны, взаимодействия
- НЕ придумывает бизнес-правила и статусы
- НЕ меняет API без фиксации в контракте

### Logic/Backend (Claude)
- отвечает за доменную модель, API, БД, state machine
- НЕ меняет UX-решения без фиксации в control-файлах

## Источники истины
- Статусы и данные целей: backend + DB
- Локально запланированные уведомления на Android: mobile app
- Правила того, КОГДА напоминать: backend-спецификация (Notification Spec)

## Ограничение платформы (важно)
Не опираться на "вечный процесс в фоне".
Использовать локальные уведомления и пересоздание расписания:
- при запуске приложения
- после sync
- после изменения целей
- после изменения настроек
